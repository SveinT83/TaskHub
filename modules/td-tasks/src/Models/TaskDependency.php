<?php
// -------------------------------------------------
// Namespace
// -------------------------------------------------
namespace tronderdata\TdTasks\Models;

// -------------------------------------------------
// Dependencies
// -------------------------------------------------
use Illuminate\Database\Eloquent\Model;

class TaskDependency extends Model
{

    // -------------------------------------------------
    // Fields that can be filled out
    // -------------------------------------------------
    protected $fillable = ['task_id', 'dependent_task_id', 'block_on_start', 'block_on_complete'];



    // ---------------------------------------------------------------------------------------------------------------------------------------------------
    // FUNCTION task
    //
    // Relation to the task that this dependency belongs to
    //
    // ---------------------------------------------------------------------------------------------------------------------------------------------------
    public function task()
    {
        // -------------------------------------------------
        // Return the relation
        // -------------------------------------------------
        return $this->belongsTo(Task::class, 'task_id');
    }



    // ---------------------------------------------------------------------------------------------------------------------------------------------------
    // FUNCTION dependentTask
    //
    // Relation to the task that this dependency depends on
    //
    // ---------------------------------------------------------------------------------------------------------------------------------------------------
    public function dependentTask()
    {
        // -------------------------------------------------
        // Return the relation
        // -------------------------------------------------
        return $this->belongsTo(Task::class, 'dependent_task_id');
    }
}
